{"ast":null,"code":"var _jsxFileName = \"/home/thiago/Documentos/Dev/Projetos/fullstack-lab/pages/profile.js\";\nvar __jsx = React.createElement;\nimport React, { useEffect } from 'react';\nimport Router from 'next/router';\nimport format from 'date-fns/format';\nimport pt from 'date-fns/locale/pt-BR';\nimport AppMenu from '../components/AppMenu';\nimport Loading from '../components/Loading';\nimport auth0 from '../lib/auth0';\nimport { db } from '../lib/firebase';\nimport '../styles/profile.css';\nexport default function profile({\n  user,\n  history,\n  isAuth\n}) {\n  useEffect(() => {\n    if (!isAuth) Router.push('/');\n  }, [isAuth]);\n\n  if (isAuth) {\n    return __jsx(React.Fragment, null, __jsx(AppMenu, {\n      user: user,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 9\n      }\n    }), __jsx(\"div\", {\n      className: \"profile-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 26,\n        columnNumber: 9\n      }\n    }, __jsx(\"div\", {\n      className: \"content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 11\n      }\n    }, __jsx(\"div\", {\n      className: \"header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 13\n      }\n    }, __jsx(\"img\", {\n      src: user.picture,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 15\n      }\n    }), __jsx(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 15\n      }\n    }, user.name), __jsx(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 15\n      }\n    }, \"Arcos/MG\")), __jsx(\"div\", {\n      className: \"symptoms-history\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 13\n      }\n    }, __jsx(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 15\n      }\n    }, \" Hist\\xF3rico \"), history.map(day => {\n      const dateFormated = format(new Date(day.date), 'dd-LLLL', {\n        locale: pt\n      });\n      return __jsx(\"div\", {\n        className: \"symptom-card\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 19\n        }\n      }, __jsx(\"div\", {\n        className: \"day-cirlce\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 21\n        }\n      }, __jsx(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 23\n        }\n      }, dateFormated.split('-')[0]), __jsx(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 23\n        }\n      }, dateFormated.split('-')[1], \" \")), __jsx(\"div\", {\n        className: \"symptoms\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 21\n        }\n      }, __jsx(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 23\n        }\n      }, \" Suspeito de Covid-19 \"), __jsx(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 23\n        }\n      }, \" \", day.symptoms.join(','), \" \")));\n    })))));\n  }\n\n  return __jsx(\"div\", {\n    className: \"center-content fullscreen\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 5\n    }\n  }, __jsx(Loading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }\n  }));\n}\nexport async function getServerSideProps({\n  req,\n  res\n}) {\n  const session = await auth0.getSession(req);\n\n  if (session) {\n    req.user = session.user;\n    const userId = session.user.sub;\n    const symptomsHistory = await db.collection('users').doc(userId).collection('history').get();\n    const historyList = [];\n    symptomsHistory.docs.map(item => {\n      historyList.push({\n        date: item.id,\n        status: item.data().status,\n        symptoms: item.data().symptoms\n      });\n    });\n    console.log(symptomsHistory.docs);\n    return {\n      props: {\n        isAuth: true,\n        user: session.user,\n        history: historyList\n      }\n    };\n  }\n\n  return {\n    props: {\n      isAuth: false\n    }\n  };\n}","map":{"version":3,"sources":["/home/thiago/Documentos/Dev/Projetos/fullstack-lab/pages/profile.js"],"names":["React","useEffect","Router","format","pt","AppMenu","Loading","auth0","db","profile","user","history","isAuth","push","picture","name","map","day","dateFormated","Date","date","locale","split","symptoms","join","getServerSideProps","req","res","session","getSession","userId","sub","symptomsHistory","collection","doc","get","historyList","docs","item","id","status","data","console","log","props"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport Router from 'next/router';\n\nimport format from 'date-fns/format';\n\nimport pt from 'date-fns/locale/pt-BR';\n\nimport AppMenu from '../components/AppMenu';\nimport Loading from '../components/Loading';\nimport auth0 from '../lib/auth0';\n\nimport { db } from '../lib/firebase';\n\nimport '../styles/profile.css';\n\nexport default function profile({ user, history, isAuth }) {\n  useEffect(() => {\n    if (!isAuth) Router.push('/');\n  }, [isAuth]);\n\n  if (isAuth) {\n    return (\n      <>\n        <AppMenu user={user} />\n\n        <div className=\"profile-container\">\n          <div className=\"content\">\n            <div className=\"header\">\n              <img src={user.picture} />\n              <h1>{user.name}</h1>\n              <p>Arcos/MG</p>\n            </div>\n\n            <div className=\"symptoms-history\">\n              <h1> Hist√≥rico </h1>\n\n              {history.map((day) => {\n                const dateFormated = format(new Date(day.date), 'dd-LLLL', {\n                  locale: pt,\n                });\n\n                return (\n                  <div className=\"symptom-card\">\n                    <div className=\"day-cirlce\">\n                      <b>{dateFormated.split('-')[0]}</b>\n                      <span>{dateFormated.split('-')[1]} </span>\n                    </div>\n\n                    <div className=\"symptoms\">\n                      <b> Suspeito de Covid-19 </b>\n                      <p> {day.symptoms.join(',')} </p>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  return (\n    <div className=\"center-content fullscreen\">\n      <Loading />\n    </div>\n  );\n}\n\nexport async function getServerSideProps({ req, res }) {\n  const session = await auth0.getSession(req);\n\n  if (session) {\n    req.user = session.user;\n    const userId = session.user.sub;\n\n    const symptomsHistory = await db\n      .collection('users')\n      .doc(userId)\n      .collection('history')\n      .get();\n\n    const historyList = [];\n\n    symptomsHistory.docs.map((item) => {\n      historyList.push({\n        date: item.id,\n        status: item.data().status,\n        symptoms: item.data().symptoms,\n      });\n    });\n\n    console.log(symptomsHistory.docs);\n\n    return {\n      props: {\n        isAuth: true,\n        user: session.user,\n        history: historyList,\n      },\n    };\n  }\n\n  return {\n    props: {\n      isAuth: false,\n    },\n  };\n}\n"]},"metadata":{},"sourceType":"module"}