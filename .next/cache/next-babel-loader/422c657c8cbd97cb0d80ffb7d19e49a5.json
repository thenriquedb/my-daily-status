{"ast":null,"code":"var _jsxFileName = \"/home/thiago/Documentos/Dev/Projects/My-Dayly-Status/pages/profile.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useEffect } from 'react';\nimport Router from 'next/router';\nimport Head from 'next/head';\nimport format from 'date-fns/format';\nimport pt from 'date-fns/locale/pt-BR';\nimport AppMenu from '../components/AppMenu';\nimport Loading from '../components/Loading';\nimport '../styles/profile.css';\nexport var __N_SSP = true;\nexport default function profile(_ref) {\n  _s();\n\n  var _this = this;\n\n  var user = _ref.user,\n      history = _ref.history,\n      isAuth = _ref.isAuth;\n  useEffect(function () {\n    if (!isAuth) Router.push('/');\n  }, [isAuth]);\n\n  if (isAuth) {\n    return __jsx(React.Fragment, null, __jsx(AppMenu, {\n      user: user,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 9\n      }\n    }), __jsx(Head, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 26,\n        columnNumber: 9\n      }\n    }, __jsx(\"title\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 11\n      }\n    }, \"Perfil\"), __jsx(\"meta\", {\n      property: \"og:title\",\n      content: \"My page title\",\n      key: \"title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 11\n      }\n    })), __jsx(\"div\", {\n      className: \"profile-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 9\n      }\n    }, __jsx(\"div\", {\n      className: \"content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 11\n      }\n    }, __jsx(\"div\", {\n      className: \"header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 13\n      }\n    }, __jsx(\"img\", {\n      src: user.picture,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 15\n      }\n    }), __jsx(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 15\n      }\n    }, user.name), __jsx(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 15\n      }\n    }, \"Arcos/MG\")), __jsx(\"div\", {\n      className: \"symptoms-history\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 13\n      }\n    }, __jsx(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 15\n      }\n    }, \" Hist\\xF3rico \"), history.map(function (day) {\n      var dateFormated = format(new Date(day.date), 'dd-LLLL', {\n        locale: pt\n      });\n      return __jsx(\"div\", {\n        className: \"symptom-card\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 19\n        }\n      }, __jsx(\"div\", {\n        className: \"day-cirlce\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 21\n        }\n      }, __jsx(\"b\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 23\n        }\n      }, dateFormated.split('-')[0]), __jsx(\"span\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 23\n        }\n      }, dateFormated.split('-')[1], \" \")), __jsx(\"div\", {\n        className: \"symptoms\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 21\n        }\n      }, __jsx(\"b\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 23\n        }\n      }, day.status === 'covid' && 'Chance de está contaminado', day.status === 'suspect' && 'Suspeito', day.status === 'healthy' && 'Saúdavel'), __jsx(\"p\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 23\n        }\n      }, \" \", day.symptoms.join(', '), \" \")));\n    })))));\n  }\n\n  return __jsx(\"div\", {\n    className: \"center-content fullscreen\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 5\n    }\n  }, __jsx(Loading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }\n  }));\n}\n\n_s(profile, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");","map":{"version":3,"sources":["/home/thiago/Documentos/Dev/Projects/My-Dayly-Status/pages/profile.js"],"names":["React","useEffect","Router","Head","format","pt","AppMenu","Loading","profile","user","history","isAuth","push","picture","name","map","day","dateFormated","Date","date","locale","split","status","symptoms","join"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport Router from 'next/router';\nimport Head from 'next/head';\n\nimport format from 'date-fns/format';\nimport pt from 'date-fns/locale/pt-BR';\n\nimport AppMenu from '../components/AppMenu';\nimport Loading from '../components/Loading';\nimport auth0 from '../lib/auth0';\n\nimport { db } from '../lib/firebase';\n\nimport '../styles/profile.css';\n\nexport default function profile({ user, history, isAuth }) {\n  useEffect(() => {\n    if (!isAuth) Router.push('/');\n  }, [isAuth]);\n\n  if (isAuth) {\n    return (\n      <>\n        <AppMenu user={user} />\n\n        <Head>\n          <title>Perfil</title>\n          <meta property=\"og:title\" content=\"My page title\" key=\"title\" />\n        </Head>\n\n        <div className=\"profile-container\">\n          <div className=\"content\">\n            <div className=\"header\">\n              <img src={user.picture} />\n              <h1>{user.name}</h1>\n              <p>Arcos/MG</p>\n            </div>\n\n            <div className=\"symptoms-history\">\n              <h1> Histórico </h1>\n\n              {history.map((day) => {\n                const dateFormated = format(new Date(day.date), 'dd-LLLL', {\n                  locale: pt,\n                });\n\n                return (\n                  <div className=\"symptom-card\">\n                    <div className=\"day-cirlce\">\n                      <b>{dateFormated.split('-')[0]}</b>\n                      <span>{dateFormated.split('-')[1]} </span>\n                    </div>\n\n                    <div className=\"symptoms\">\n                      <b>\n                        {day.status === 'covid' && 'Chance de está contaminado'}\n\n                        {day.status === 'suspect' && 'Suspeito'}\n\n                        {day.status === 'healthy' && 'Saúdavel'}\n                      </b>\n                      <p> {day.symptoms.join(', ')} </p>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  return (\n    <div className=\"center-content fullscreen\">\n      <Loading />\n    </div>\n  );\n}\n\nexport async function getServerSideProps({ req, res }) {\n  const session = await auth0.getSession(req);\n\n  if (session) {\n    req.user = session.user;\n    const userId = session.user.sub;\n\n    const symptomsHistory = await db\n      .collection('users')\n      .doc(userId)\n      .collection('history')\n      .get();\n\n    const historyList = [];\n\n    symptomsHistory.docs.map((item) => {\n      historyList.push({\n        date: item.id,\n        status: item.data().status,\n        symptoms: item.data().symptoms,\n      });\n    });\n\n    console.log(symptomsHistory.docs);\n\n    return {\n      props: {\n        isAuth: true,\n        user: session.user,\n        history: historyList,\n      },\n    };\n  }\n\n  return {\n    props: {\n      isAuth: false,\n    },\n  };\n}\n"]},"metadata":{},"sourceType":"module"}