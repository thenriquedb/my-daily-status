{"ast":null,"code":"import { db, admin } from '../../lib/firebase';\nimport getCurrentDate from '../../util/getCurrentDate';\nexport default async function createStatus(req, res) {\n  console.log('CHEGOU\\n\\n\\n\\n\\n');\n  const {\n    symptoms = [],\n    status\n  } = req.body;\n  const {\n    latitude,\n    longitude\n  } = req.body.coords;\n  const {\n    userid: userId\n  } = req.headers;\n  const currentDate = getCurrentDate();\n  await db.collection('users').doc(userId).collection('history').doc(currentDate).set({\n    symptoms,\n    status,\n    coordinates: {\n      latitude,\n      longitude\n    }\n  });\n  await db.collection('history').doc(currentDate).collection('all').add({\n    user: userId,\n    symptoms,\n    coordinates: new admin.firestore.GeoPoint(latitude, longitude),\n    status\n  });\n  return res.status(200).end();\n}","map":null,"metadata":{},"sourceType":"module"}