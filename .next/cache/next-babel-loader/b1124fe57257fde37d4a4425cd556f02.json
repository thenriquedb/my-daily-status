{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nvar _this = this,\n    _jsxFileName = \"/home/thiago/Documentos/Dev/Projetos/fullstack-lab/components/ContaminatedMarker/index.js\";\n\nvar __jsx = React.createElement;\nimport React from 'react';\nimport './styles.css';\nimport VirusSvg from '../../public/assets/icons/virus.svg';\n\nvar ContaminatedMarker = function ContaminatedMarker(_ref) {\n  var data = _ref.data;\n  return __jsx(\"div\", {\n    className: \"contaminated-marker \".concat(data.status === 'covid' && 'covid'),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 8,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"contaminated-marker-popup\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 11,\n      columnNumber: 7\n    }\n  }, __jsx(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 12,\n      columnNumber: 9\n    }\n  }, \" doidmias\")), __jsx(VirusSvg, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 14,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport function getServerSideProps(_ref2) {\n  var req, res, session, userId, symptomsHistory, historyList;\n  return _regeneratorRuntime.async(function getServerSideProps$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          req = _ref2.req, res = _ref2.res;\n          _context.next = 3;\n          return _regeneratorRuntime.awrap(auth0.getSession(req));\n\n        case 3:\n          session = _context.sent;\n\n          if (!session) {\n            _context.next = 14;\n            break;\n          }\n\n          req.user = session.user;\n          userId = session.user.sub;\n          _context.next = 9;\n          return _regeneratorRuntime.awrap(db.collection('users').doc(userId).collection('history').get());\n\n        case 9:\n          symptomsHistory = _context.sent;\n          historyList = [];\n          symptomsHistory.docs.map(function (item) {\n            historyList.push({\n              date: item.id,\n              status: item.data().status,\n              symptoms: item.data().symptoms\n            });\n          });\n          console.log(symptomsHistory.docs);\n          return _context.abrupt(\"return\", {\n            props: {\n              isAuth: true,\n              user: session.user,\n              history: historyList\n            }\n          });\n\n        case 14:\n          return _context.abrupt(\"return\", {\n            props: {\n              isAuth: false\n            }\n          });\n\n        case 15:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\nexport default ContaminatedMarker;","map":{"version":3,"sources":["/home/thiago/Documentos/Dev/Projetos/fullstack-lab/components/ContaminatedMarker/index.js"],"names":["React","VirusSvg","ContaminatedMarker","data","status","getServerSideProps","req","res","auth0","getSession","session","user","userId","sub","db","collection","doc","get","symptomsHistory","historyList","docs","map","item","push","date","id","symptoms","console","log","props","isAuth","history"],"mappings":";;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,cAAP;AAEA,OAAOC,QAAP,MAAqB,qCAArB;;AAEA,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,OAAc;AAAA,MAAXC,IAAW,QAAXA,IAAW;AACvC,SACE;AACE,IAAA,SAAS,gCAAyBA,IAAI,CAACC,MAAL,KAAgB,OAAhB,IAA2B,OAApD,CADX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAGE;AAAK,IAAA,SAAS,EAAC,2BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,CAHF,EAME,MAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IANF,CADF;AAUD,CAXD;;AAaA,OAAO,SAAeC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAoCC,UAAAA,GAApC,SAAoCA,GAApC,EAAyCC,GAAzC,SAAyCA,GAAzC;AAAA;AAAA,2CACiBC,KAAK,CAACC,UAAN,CAAiBH,GAAjB,CADjB;;AAAA;AACCI,UAAAA,OADD;;AAAA,eAGDA,OAHC;AAAA;AAAA;AAAA;;AAIHJ,UAAAA,GAAG,CAACK,IAAJ,GAAWD,OAAO,CAACC,IAAnB;AACMC,UAAAA,MALH,GAKYF,OAAO,CAACC,IAAR,CAAaE,GALzB;AAAA;AAAA,2CAO2BC,EAAE,CAC7BC,UAD2B,CAChB,OADgB,EAE3BC,GAF2B,CAEvBJ,MAFuB,EAG3BG,UAH2B,CAGhB,SAHgB,EAI3BE,GAJ2B,EAP3B;;AAAA;AAOGC,UAAAA,eAPH;AAaGC,UAAAA,WAbH,GAaiB,EAbjB;AAeHD,UAAAA,eAAe,CAACE,IAAhB,CAAqBC,GAArB,CAAyB,UAACC,IAAD,EAAU;AACjCH,YAAAA,WAAW,CAACI,IAAZ,CAAiB;AACfC,cAAAA,IAAI,EAAEF,IAAI,CAACG,EADI;AAEfrB,cAAAA,MAAM,EAAEkB,IAAI,CAACnB,IAAL,GAAYC,MAFL;AAGfsB,cAAAA,QAAQ,EAAEJ,IAAI,CAACnB,IAAL,GAAYuB;AAHP,aAAjB;AAKD,WAND;AAQAC,UAAAA,OAAO,CAACC,GAAR,CAAYV,eAAe,CAACE,IAA5B;AAvBG,2CAyBI;AACLS,YAAAA,KAAK,EAAE;AACLC,cAAAA,MAAM,EAAE,IADH;AAELnB,cAAAA,IAAI,EAAED,OAAO,CAACC,IAFT;AAGLoB,cAAAA,OAAO,EAAEZ;AAHJ;AADF,WAzBJ;;AAAA;AAAA,2CAkCE;AACLU,YAAAA,KAAK,EAAE;AACLC,cAAAA,MAAM,EAAE;AADH;AADF,WAlCF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAyCP,eAAe5B,kBAAf","sourcesContent":["import React from 'react';\nimport './styles.css';\n\nimport VirusSvg from '../../public/assets/icons/virus.svg';\n\nconst ContaminatedMarker = ({ data }) => {\n  return (\n    <div\n      className={`contaminated-marker ${data.status === 'covid' && 'covid'}`}\n    >\n      <div className=\"contaminated-marker-popup\">\n        <h2> doidmias</h2>\n      </div>\n      <VirusSvg />\n    </div>\n  );\n};\n\nexport async function getServerSideProps({ req, res }) {\n  const session = await auth0.getSession(req);\n\n  if (session) {\n    req.user = session.user;\n    const userId = session.user.sub;\n\n    const symptomsHistory = await db\n      .collection('users')\n      .doc(userId)\n      .collection('history')\n      .get();\n\n    const historyList = [];\n\n    symptomsHistory.docs.map((item) => {\n      historyList.push({\n        date: item.id,\n        status: item.data().status,\n        symptoms: item.data().symptoms,\n      });\n    });\n\n    console.log(symptomsHistory.docs);\n\n    return {\n      props: {\n        isAuth: true,\n        user: session.user,\n        history: historyList,\n      },\n    };\n  }\n\n  return {\n    props: {\n      isAuth: false,\n    },\n  };\n}\n\nexport default ContaminatedMarker;\n"]},"metadata":{},"sourceType":"module"}