{"ast":null,"code":"import { db, admin } from '../../lib/firebase';\nimport getCurrentDate from '../../util/getCurrentDate';\nexport default async function createStatus(req, res) {\n  console.log('CHEGOU\\n\\n\\n\\n\\n');\n  const {\n    symptoms = [],\n    status\n  } = req.body;\n  const {\n    latitude,\n    longitude\n  } = req.body.coords;\n  const {\n    userid: userId\n  } = req.headers;\n  const currentDate = getCurrentDate();\n  await db.collection('users').doc(userId).collection('history').doc(currentDate).set({\n    symptoms,\n    status,\n    coordinates: {\n      latitude,\n      longitude\n    }\n  });\n  await db.collection('history').doc(currentDate).collection('all').add({\n    user: userId,\n    symptoms,\n    coordinates: new admin.firestore.GeoPoint(latitude, longitude),\n    status\n  });\n  return res.status(200).end();\n}","map":{"version":3,"sources":["/home/thiago/Documentos/Dev/Projects/My-Dayly-Status/pages/api/createStatus.js"],"names":["db","admin","getCurrentDate","createStatus","req","res","console","log","symptoms","status","body","latitude","longitude","coords","userid","userId","headers","currentDate","collection","doc","set","coordinates","add","user","firestore","GeoPoint","end"],"mappings":"AAAA,SAASA,EAAT,EAAaC,KAAb,QAA0B,oBAA1B;AACA,OAAOC,cAAP,MAA2B,2BAA3B;AAEA,eAAe,eAAeC,YAAf,CAA4BC,GAA5B,EAAiCC,GAAjC,EAAsC;AACnDC,EAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACA,QAAM;AAAEC,IAAAA,QAAQ,GAAG,EAAb;AAAiBC,IAAAA;AAAjB,MAA4BL,GAAG,CAACM,IAAtC;AACA,QAAM;AAAEC,IAAAA,QAAF;AAAYC,IAAAA;AAAZ,MAA0BR,GAAG,CAACM,IAAJ,CAASG,MAAzC;AACA,QAAM;AAAEC,IAAAA,MAAM,EAAEC;AAAV,MAAqBX,GAAG,CAACY,OAA/B;AACA,QAAMC,WAAW,GAAGf,cAAc,EAAlC;AAEA,QAAMF,EAAE,CACLkB,UADG,CACQ,OADR,EAEHC,GAFG,CAECJ,MAFD,EAGHG,UAHG,CAGQ,SAHR,EAIHC,GAJG,CAICF,WAJD,EAKHG,GALG,CAKC;AACHZ,IAAAA,QADG;AAEHC,IAAAA,MAFG;AAGHY,IAAAA,WAAW,EAAE;AACXV,MAAAA,QADW;AAEXC,MAAAA;AAFW;AAHV,GALD,CAAN;AAcA,QAAMZ,EAAE,CACLkB,UADG,CACQ,SADR,EAEHC,GAFG,CAECF,WAFD,EAGHC,UAHG,CAGQ,KAHR,EAIHI,GAJG,CAIC;AACHC,IAAAA,IAAI,EAAER,MADH;AAEHP,IAAAA,QAFG;AAGHa,IAAAA,WAAW,EAAE,IAAIpB,KAAK,CAACuB,SAAN,CAAgBC,QAApB,CAA6Bd,QAA7B,EAAuCC,SAAvC,CAHV;AAIHH,IAAAA;AAJG,GAJD,CAAN;AAWA,SAAOJ,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBiB,GAAhB,EAAP;AACD","sourcesContent":["import { db, admin } from '../../lib/firebase';\nimport getCurrentDate from '../../util/getCurrentDate';\n\nexport default async function createStatus(req, res) {\n  console.log('CHEGOU\\n\\n\\n\\n\\n');\n  const { symptoms = [], status } = req.body;\n  const { latitude, longitude } = req.body.coords;\n  const { userid: userId } = req.headers;\n  const currentDate = getCurrentDate();\n\n  await db\n    .collection('users')\n    .doc(userId)\n    .collection('history')\n    .doc(currentDate)\n    .set({\n      symptoms,\n      status,\n      coordinates: {\n        latitude,\n        longitude,\n      },\n    });\n\n  await db\n    .collection('history')\n    .doc(currentDate)\n    .collection('all')\n    .add({\n      user: userId,\n      symptoms,\n      coordinates: new admin.firestore.GeoPoint(latitude, longitude),\n      status,\n    });\n\n  return res.status(200).end();\n}\n"]},"metadata":{},"sourceType":"module"}