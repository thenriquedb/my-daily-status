{"version":3,"file":"static/webpack/static/development/pages/status.js.2e08e460c6295e42241d.hot-update.js","sources":["webpack:///./pages/status.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Router from 'next/router';\nimport axios from 'axios';\nimport auth0 from '../lib/auth0';\n\nimport AppMenu from '../components/AppMenu';\nimport Loading from '../components/Loading';\nimport Footer from '../components/Footer';\nimport Symptom from '../components/Symptom';\n\nimport symptoms from '../json/symptoms.json';\n\nimport '../styles/status.css';\n\nexport default function status({ user, isAuth }) {\n  const [coords, setCoords] = useState({ latitude: null, longitude: null });\n  const [selectedSymptoms, setSelectedSymptoms] = useState([]);\n\n  function getUserLocation() {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition((position) => {\n        const { latitude, longitude } = position.coords;\n        setCoords({ latitude, longitude });\n      });\n    } else {\n      alert('Seu navegador não possui suporte a geolocalização');\n      Router.push('/');\n    }\n  }\n\n  function selectSymptom(symptom) {\n    if (selectedSymptoms.includes(symptom)) {\n      setSelectedSymptoms(selectedSymptoms.filter((item) => item !== symptom));\n      return;\n    }\n\n    setSelectedSymptoms([...selectedSymptoms, symptom]);\n  }\n\n  async function handleSave() {\n    const response = await axios.post('/api/status/store', {\n      symptoms: selectedSymptoms,\n      coords,\n    });\n    console.log(response);\n    if (response.status === '200') {\n      alert('salvou bunito');\n    } else {\n      alert('deu erros');\n    }\n  }\n\n  useEffect(() => {\n    if (!isAuth) Router.push('/');\n\n    getUserLocation();\n  }, [isAuth]);\n\n  if (isAuth) {\n    return (\n      <>\n        <AppMenu user={user} />\n\n        <div className=\"status-container\">\n          <div className=\"content\">\n            <div className=\"nurse-container\">\n              <img src=\"assets/icons/nurse.svg\" alt=\"Nurse icon\" />\n              <p>\n                Olá <b>{user.name}</b>, como você está se sentindo hoje?\n                Selecione abaixo os sintomas que você esta sentindo. Caso não\n                esteja apresentando nenhum, clique em continuar.{' '}\n              </p>\n            </div>\n\n            <div className=\"symptoms-container\">\n              {symptoms.map((symptom) => {\n                return (\n                  <Symptom\n                    key={symptom.value}\n                    onClick={selectSymptom}\n                    selected={selectedSymptoms.includes(symptom.value)}\n                    symptom={symptom}\n                  />\n                );\n              })}\n            </div>\n\n            <div className=\"save-button-container\">\n              <button type=\"button\" onClick={handleSave}>\n                Continuar\n              </button>\n            </div>\n          </div>\n        </div>\n        <Footer />\n      </>\n    );\n  }\n\n  return (\n    <div className=\"center-content fullscreen\">\n      <Loading />\n    </div>\n  );\n}\n\nexport async function getServerSideProps({ req, res }) {\n  // pega o cookie da sessão do usuario\n  const session = await auth0.getSession(req);\n  if (session) {\n    req.user = session.user;\n\n    return {\n      props: {\n        isAuth: true,\n        user: session.user,\n      },\n    };\n  }\n\n  return {\n    props: {\n      isAuth: false,\n    },\n  };\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAGA;AACA;AACA;AACA;AAEA;AAEA;;AAEA;AAAA;AACA;AADA;AAAA;AACA;AADA;AACA;AAAA;AAAA;AADA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAGA;AACA;AACA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAFA;AACA;AAFA;AACA;AAIA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAXA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAYA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAEA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;;;;A","sourceRoot":""}